---
import type { MarkdownHeading } from 'astro';
import config from 'virtual:starlight/user-config';
import type { StarlightDocsEntry } from '../utils/routing';
import { useTranslations } from '../utils/translations';
import EditLink from './EditLink.astro';
import RightSidebarPanel from './RightSidebarPanel.astro';
import TableOfContents from './TableOfContents.astro';

interface Props {
  entry: StarlightDocsEntry;
  headings: MarkdownHeading[];
  locale: string | undefined;
}

const { entry, headings, locale } = Astro.props;
const t = useTranslations(locale);
---

<RightSidebarPanel>
  <TableOfContents {headings} {locale} />
</RightSidebarPanel>
<RightSidebarPanel>
  {
    config.editLink.baseUrl && (
      <>
        <h2>{t('tableOfContents.contribute')}</h2>
        <EditLink data={entry.data} id={entry.id} {locale} />
      </>
    )
  }
</RightSidebarPanel>
